@model pradeepm.Models.ModelUserJoin

@{
    ViewData["Title"] = "Join";
}

<div class="col-sm-12">
    <div class="card">
        <div class="card-header">
            <h5>ModelUserJoin</h5>
        </div>
        <div class="card-block">



            <form asp-action="Join">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label asp-for="Pincode" class="control-label"></label>
                            <input asp-for="Pincode" class="form-control" />
                            <span asp-validation-for="Pincode" class="text-danger"></span>
                            <span id="pinvalid"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Sponserid" class="control-label"></label>
                            <input asp-for="Sponserid" class="form-control" />
                            <span asp-validation-for="Sponserid" class="text-danger"></span>
                            <span id="sponservalid"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="RootId" class="control-label"></label>
                            <input asp-for="RootId" class="form-control" />
                            <span asp-validation-for="RootId" class="text-danger"></span>
                            <span id="rootvalid"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="JoiningSide" class="control-label"></label>
                            <select asp-for="JoiningSide" class="form-control">

                            </select>
                            <span asp-validation-for="JoiningSide" class="text-danger"></span>
                            <span id="sidevalid"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label asp-for="ApplicationName" class="control-label"></label>
                            <input asp-for="ApplicationName" class="form-control" />
                            <span asp-validation-for="ApplicationName" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="PanCard" class="control-label"></label>
                            <input asp-for="PanCard" class="form-control" />
                            <span asp-validation-for="PanCard" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Dateofbirth" class="control-label"></label>
                            <input asp-for="Dateofbirth" class="form-control" />
                            <span asp-validation-for="Dateofbirth" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Gender" class="control-label"></label>
                            <input asp-for="Gender" class="form-control" />
                            <span asp-validation-for="Gender" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label asp-for="Mobile" class="control-label"></label>
                            <input asp-for="Mobile" class="form-control" />
                            <span asp-validation-for="Mobile" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Email" class="control-label"></label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Password" class="control-label"></label>
                            <input asp-for="Password" class="form-control" />
                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="RetypePassword" class="control-label"></label>
                            <input asp-for="RetypePassword" class="form-control" />
                            <span asp-validation-for="RetypePassword" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input type="submit" value="Create" class="btn btn-default" />
                        </div>

                    </div>

                </div>
            </form>
        </div>
    </div>
</div>


@section scripts{
<script>
    $(document).ready(function () {
        $("[name=Pincode]").focus();
        $("[name=Pincode]").blur(function () {
            //alert("blured");
            var pin = $(this).val();
            $.ajax({
                url: "/Pin/IsPinValid?pincode=" + pin,
                success: function (data) {
                    if (data == "success") {
                        $("#pinvalid").text("Pin is Valid");
                        $("#pinvalid").removeClass("label-danger");
                        $("#pinvalid").addClass("label label-success");
                    } else {
                        $("#pinvalid").text("Pin is not Valid");
                        $("#pinvalid").removeClass("label-success");
                        $("#pinvalid").addClass("label label-danger");
                    }
                }
            });
        });
        $("[name=Sponserid]").blur(function () {
            //alert("blured");
            var pin = $(this).val();
            $.ajax({
                url: "/User/GetUserName?accountid=" + pin,
                success: function (data) {

                    $("#sponservalid").text(data);
                    $("#sponservalid").removeClass("label-danger");
                    $("#sponservalid").addClass("label label-success");

                }
            });
        });
        $("[name=RootId]").blur(function () {
            //alert("blured");
            var pin = $(this).val();
            $.ajax({
                url: "/User/GetUserName?accountid=" + pin,
                success: function (data) {
                    $("#rootvalid").text(data);
                    $("#rootvalid").removeClass("label-danger");
                    $("#rootvalid").addClass("label label-success");
                    debugger;
                    $.ajax({
                        url: "GetSides?accountid=" + pin,
                        success: function (data) {
                            $("[name=JoiningSide]").html("");
                            if (data.indexOf("1")>=0)
                                $("[name=JoiningSide]").append("<option value=1>Left</option>");
                            if (data.indexOf("2")>=0)
                                $("[name=JoiningSide]").append("<option value=2>Right</option>");
                        }
                    });
                    
                }
            });
        });
    });
</script>
}